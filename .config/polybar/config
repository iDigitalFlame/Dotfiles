#!/usr/bin/false
################################
### iDigitalFlame  2016-2021 ###
#                              #
#            -/`               #
#            -yy-   :/`        #
#         ./-shho`:so`         #
#    .:- /syhhhh//hhs` `-`     #
#   :ys-:shhhhhhshhhh.:o- `    #
#   /yhsoshhhhhhhhhhhyho`:/.   #
#   `:yhyshhhhhhhhhhhhhh+hd:   #
#     :yssyhhhhhyhhhhhhhhdd:   #
#    .:.oyshhhyyyhhhhhhddd:    #
#    :o+hhhhhyssyhhdddmmd-     #
#     .+yhhhhyssshdmmddo.      #
#       `///yyysshd++`         #
#                              #
########## SPACEPORT ###########
################################
## Polybar Configuration
#
# Copyright (C) 2016 - 2021 iDigitalFlame
#
# This program is free software: you can redistribute it and/or modify
# it under the terms of the GNU General Public License as published by
# the Free Software Foundation, either version 3 of the License, or
# any later version.
#
# This program is distributed in the hope that it will be useful,
# but WITHOUT ANY WARRANTY; without even the implied warranty of
# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
# GNU General Public License for more details.
#
# You should have received a copy of the GNU General Public License
# along with this program.  If not, see <https://www.gnu.org/licenses/>.
#

[global/wm]
margin-top                              = 0
margin-bottom                           = 0

[settings]
throttle-output                         = 5
throttle-output-for                     = 10
screenchange-reload                     = true

[theme]
include-file                            = $HOME/.config/theme/current/polybar.conf

[module/i3]
type                                    = internal/i3
index-sort                              = true
fuzzy-match                             = true
enable-click                            = true
enable-scroll                           = true
pin-workspaces                          = false
wrapping-scroll                         = true
strip-wsnumbers                         = true

format                                  = "<label-state>"
format-prefix                           = ${theme.prefix}
format-suffix                           = ${theme.suffix}

format-foreground                       = ${theme.color-module}
format-background                       = ${theme.color-module}
format-suffix-padding                   = ${theme.spacing}
format-prefix-padding                   = ${theme.spacing}
format-prefix-foreground                = ${theme.clear}
format-prefix-background                = ${theme.color-i3}
format-suffix-foreground                = ${theme.clear}
format-suffix-background                = ${theme.clear}

label-urgent                            = " %index%"
label-urgent-padding                    = 1
label-urgent-foreground                 = ${theme.text-urgent}
label-urgent-background                 = ${self.format-background}

label-visible                           = " %index%"
label-visible-padding                   = ${self.label-urgent-padding}
label-visible-foreground                = ${theme.text}
label-visible-background                = ${self.format-background}

label-focused                           = " %index%"
label-focused-padding                   = ${self.label-urgent-padding}
label-focused-foreground                = ${theme.text}
label-focused-background                = ${self.format-background}

label-unfocused                         = " %index%"
label-unfocused-padding                 = ${self.label-urgent-padding}
label-unfocused-foreground              = ${theme.text}
label-unfocused-background              = ${self.format-background}

[module/cpu]
type                                    = internal/cpu
format                                  = "<label>"
interval                                = 2

label                                   = "%percentage:02%% "
label-padding                           = 1

format-suffix                           = ${theme.suffix}
format-background                       = ${theme.color-module}
format-foreground                       = ${theme.text}
format-suffix-foreground                = ${theme.clear}
format-suffix-background                = ${theme.clear}

[module/date]
date                                    = "%a"
type                                    = internal/date
time                                    = "%H:%M"
interval                                = 10
date-alt                                = "%A %D"
time-alt                                = "%H:%M"

label                                   = "%date:03% %time:05%"
label-padding-left                      = 1
label-padding-right                     = 1

format-prefix                           = ${theme.prefix}
format-background                       = ${theme.color-module}
format-foreground                       = ${theme.text}
format-prefix-padding                   = ${theme.spacing}
format-prefix-foreground                = ${theme.color-date}
format-prefix-background                = ${theme.color-date}

[module/volume]
type                                    = internal/pulseaudio
ramp-volume-0                           = ""
ramp-volume-1                           = ""
ramp-volume-2                           = ""
master-mixer                            = Master
master-soundcard                        = default

label-muted                             = "Mute"
label-muted-padding-left                = 1
label-muted-padding-right               = 0

label-volume                            = "%percentage:02%%"
label-volume-padding-left               = 1
label-volume-padding-right              = 0

format-muted                            = "<label-muted>  "
format-muted-prefix                     = ${theme.prefix}
format-muted-suffix                     = ${theme.suffix}
format-muted-padding                    = 0
format-muted-background                 = ${theme.color-module}
format-muted-foreground                 = ${theme.text}
format-muted-padding-left               = 0
format-muted-padding-right              = 1
format-muted-prefix-padding             = ${theme.spacing}
format-muted-prefix-foreground          = ${theme.color-volume}
format-muted-prefix-background          = ${theme.color-volume}
format-muted-suffix-foreground          = ${theme.clear}
format-muted-suffix-background          = ${theme.clear}

format-volume                           = "<label-volume> <ramp-volume> "
format-volume-prefix                    = ${self.format-muted-prefix}
format-volume-suffix                    = ${self.format-muted-suffix}
format-volume-padding                   = 0
format-volume-background                = ${self.format-muted-background}
format-volume-foreground                = ${self.format-muted-foreground}
format-volume-padding-left              = ${self.format-muted-padding-left}
format-volume-padding-right             = ${self.format-muted-padding-right}
format-volume-prefix-padding            = ${self.format-muted-prefix-padding}
format-volume-prefix-foreground         = ${self.format-muted-prefix-foreground}
format-volume-prefix-background         = ${self.format-muted-prefix-background}
format-volume-suffix-foreground         = ${self.format-muted-suffix-foreground}
format-volume-suffix-background         = ${self.format-muted-suffix-background}

[module/memory]
type                                    = internal/memory
interval                                = 15

label                                   = "%gb_used:05% "
label-padding-left                      = 1
label-padding-right                     = 0

format                                  = "<label>"
format-prefix                           = ${theme.prefix}
format-background                       = ${theme.color-module}
format-foreground                       = ${theme.text}
format-prefix-foreground                = ${theme.color-health}
format-prefix-background                = ${theme.color-health}

[module/xwindow]
type                                    = internal/xwindow

label                                   = "%title%"
label-maxlen                            = 85
label-padding                           = 2

format                                  = "<label>"
format-suffix                           = ${theme.suffix}
format-background                       = ${theme.color-module}
format-foreground                       = ${theme.text}
format-suffix-foreground                = ${theme.color-xwindow}
format-suffix-background                = ${theme.color-xwindow}

[module/weather]
type                                    = custom/script
exec                                    = "$HOME/.local/bin/polybar/weather"
interval                                = 600
click-right                             = "$HOME/.local/bin/polybar/weather go"

label-font                              = 3
label-padding                           = 1

format                                  = "<label>"
format-prefix                           = ${theme.prefix}
format-suffix                           = ${theme.suffix}
format-background                       = ${theme.color-module}
format-foreground                       = ${theme.text}
format-suffix-padding                   = ${theme.spacing}
format-prefix-padding                   = ${theme.spacing}
format-prefix-foreground                = ${theme.color-weather}
format-prefix-background                = ${theme.color-weather}
format-suffix-foreground                = ${theme.clear}
format-suffix-background                = ${theme.clear}

[module/battery0]
type                                    = internal/battery
adapter                                 = AC
full-at                                 = 100
battery                                 = BAT0
time-format                             = ""
ramp-capacity-0                         = ""
ramp-capacity-1                         = ""
ramp-capacity-2                         = ""
ramp-capacity-3                         = ""
ramp-capacity-4                         = ""
animation-charging-0                    = ""
animation-charging-1                    = ""
animation-charging-2                    = ""
ramp-capacity-foreground                = ${theme.text-discharging}
animation-charging-framerate            = 750
animation-charging-foreground           = ${theme.text-charging}

label-full                              = "%percentage:02%%"
label-full-padding-left                 = 1
label-full-padding-right                = 0

format-full                             = "<label-full> "
format-full-prefix                      = ${theme.prefix}
format-full-background                  = ${theme.color-module}
format-full-foreground                  = ${theme.text}
format-full-prefix-padding              = ${theme.spacing}
format-full-prefix-foreground           = ${theme.color-battery}
format-full-prefix-background           = ${theme.color-battery}

label-charging                          = "%percentage:02%%"
label-charging-padding-left             = 1
label-charging-padding-right            = 0

format-charging                         = "<label-charging>  <animation-charging>"
format-charging-prefix                  = ${self.format-full-prefix}
format-charging-padding                 = 1
format-charging-background              = ${self.format-full-background}
format-charging-foreground              = ${self.format-full-foreground}
format-charging-prefix-foreground       = ${self.format-full-prefix-foreground}
format-charging-prefix-background       = ${self.format-full-prefix-background}

label-discharging                       = "%percentage:02%%"
label-discharging-padding-left          = 1
label-discharging-padding-right         = 0

format-discharging                      = "<label-discharging> <ramp-capacity>"
format-discharging-prefix               = ${self.format-full-prefix}
format-discharging-padding              = 1
format-discharging-background           = ${self.format-full-background}
format-discharging-foreground           = ${self.format-full-foreground}
format-discharging-prefix-foreground    = ${self.format-full-prefix-foreground}
format-discharging-prefix-background    = ${self.format-full-prefix-background}

[module/battery1]
inherit                                 = module/battery0
type                                    = internal/battery
full-at                                 = 100
battery                                 = BAT1

label-full-padding-left                 = 0
label-full-padding-right                = 0

label-charging-padding-left             = 0
label-charging-padding-right            = 0

label-discharging-padding-left          = 0
label-discharging-padding-right         = 0

format-full                             = "<label-full>  "
format-full-suffix                      = ${theme.suffix}
format-full-padding-left                = 0
format-full-padding-right               = 1
format-full-prefix-foreground           = ${theme.color-module}
format-full-prefix-background           = ${theme.color-module}
format-full-suffix-foreground           = ${theme.clear}
format-full-suffix-background           = ${theme.clear}

format-charging                         = "<label-charging>  <animation-charging> "
format-charging-suffix                  = ${theme.suffix}
format-charging-padding-left            = 0
format-charging-padding-right           = 1
format-charging-prefix-foreground       = ${theme.color-module}
format-charging-prefix-background       = ${theme.color-module}
format-charging-suffix-foreground       = ${theme.clear}
format-charging-suffix-background       = ${theme.clear}

format-discharging                      = "<label-discharging> <ramp-capacity> "
format-discharging-suffix               = ${theme.suffix}
format-discharging-padding-left         = 0
format-discharging-padding-right        = 1
format-discharging-prefix-foreground    = ${theme.color-module}
format-discharging-prefix-background    = ${theme.color-module}
format-discharging-suffix-foreground    = ${theme.clear}
format-discharging-suffix-background    = ${theme.clear}

[module/lockerctl]
type                                    = custom/script
exec                                    = "$HOME/.local/bin/polybar/lockers"
format                                  = "<label>"
interval                                = 10

label-padding-left                      = 1
label-padding-right                     = 0

click-left                              = "$HOME/.local/bin/i3/locker"
click-middle                            = "/usr/local/bin/lockerctl -kz false -kb false -kl false -ks false"

format-prefix                           = ${theme.prefix}
format-background                       = ${theme.color-module}
format-foreground                       = ${theme.text}
format-prefix-padding                   = ${theme.spacing}
format-prefix-foreground                = ${theme.color-smd}
format-prefix-background                = ${theme.color-smd}
format-suffix-foreground                = ${self.format-background}
format-suffix-background                = ${self.format-background}

[module/rotatectl]
type                                    = custom/script
exec                                    = "$HOME/.local/bin/polybar/rotate"
format                                  = "<label>"
interval                                = 10
click-right                             = "rotatectl -t"
label-padding                           = 1

format-suffix                           = ${theme.suffix}
format-background                       = ${theme.color-module}
format-foreground                       = ${theme.text}
format-suffix-padding                   = ${theme.spacing}
format-prefix-foreground                = ${self.format-background}
format-prefix-background                = ${self.format-background}
format-suffix-foreground                = ${theme.clear}
format-suffix-background                = ${theme.clear}

[module/bluetooth]
type                                    = custom/script
exec                                    = "rfkill | grep bluetooth | grep -q 'unblocked unblocked' && echo "
interval                                = 10
click-right                             = "blue -d"

label-padding-left                      = 1
label-padding-right                     = 0

format                                  = "<label>"
format-background                       = ${theme.color-module}
format-foreground                       = ${theme.text}

[module/filesystem]
type                                    = internal/fs
mount-0                                 = /home
interval                                = 120
fixed-values                            = true

label-mounted                           = "%percentage_used:2%% "
label-mounted-padding-left              = 1
label-mounted-padding-right             = 0

format-mounted                          = "<label-mounted>"
format-mounted-foreground               = ${theme.text}
format-mounted-background               = ${theme.color-module}

[module/battery0-small]
inherit                                 = module/battery0
type                                    = internal/battery
label-full                              = "%percentage:02%%"

format-full                             = "<label-full>"
format-charging                         = " <label-charging>"
format-discharging                      = "<label-discharging>"

[module/battery1-small]
inherit                                 = module/battery1
type                                    = internal/battery
label-full                              = "%percentage:02%%"

format-full                             = "<label-full> "
format-charging                         = "<label-charging> "
format-discharging                      = "<label-discharging> "

[bar/small]
width                                   = 100%
radius                                  = 0
height                                  = 20
bottom                                  = false
font-0                                  = Hack Nerd Font Bold Mono:size=9;2
font-1                                  = FontAwesome:size=10;2
font-2                                  = Weather Icons:size=10;1
monitor                                 =
scroll-up                               = i3wm-wsnext
line-size                               = 0
line-color                              = ${theme.text}
foreground                              = ${theme.foreground}
background                              = ${theme.background}
scroll-down                             = i3wm-wsprev
border-size                             = 0
border-color                            = ${theme.background}
tray-padding                            = 1
fixed-center                            = true
padding-left                            = 0
modules-left                            =
padding-right                           = 0
modules-right                           = i3 lockerctl rotatectl volume memory cpu battery0-small battery1-small date
tray-position                           = right
tray-detached                           = false
modules-center                          =
tray-background                         = ${theme.color-module}
monitor-fallback                        = eDP-1
module-margin-left                      = 0
module-margin-right                     = 0

[bar/standard]
inherit                                 = bar/small
modules-left                            = xwindow
modules-right                           = i3 weather lockerctl bluetooth rotatectl volume memory filesystem cpu battery0 battery1 date
